<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MATCH - Sistema Inmobiliario Inteligente</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-building"></i> MATCH</h1>
            <p>Sistema Inmobiliario Inteligente con Filtros Avanzados</p>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon" style="color: var(--primary-color);">
                    <i class="fas fa-home"></i>
                </div>
                <div class="stat-value" id="totalProperties">1,247</div>
                <div class="stat-label">Propiedades Totales</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="color: var(--success-color);">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-value">847</div>
                <div class="stat-label">En Venta</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="color: var(--warning-color);">
                    <i class="fas fa-key"></i>
                </div>
                <div class="stat-value">400</div>
                <div class="stat-label">En Alquiler</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="color: var(--danger-color);">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-value">23</div>
                <div class="stat-label">Nuevas Hoy</div>
            </div>
        </div>

        <!-- Main Dashboard -->
        <div class="dashboard-grid">
            <!-- Sidebar with Filters -->
            <div class="sidebar">
                <div class="filters-section">
                    <h3><i class="fas fa-filter"></i> Filtros</h3>

                    <!-- Tabs para diferentes tipos de filtro -->
                    <div class="tabs">
                        <div class="tab active" data-tab="basic">Básicos</div>
                        <div class="tab" data-tab="advanced">Avanzados</div>
                    </div>

                    <!-- Filtros Básicos -->
                    <div class="tab-content active" id="basic">
                        <div class="filter-group">
                            <label>Tipo de Operación</label>
                            <select class="filter-input" id="operationType">
                                <option value="">Todos</option>
                                <option value="venta">Venta</option>
                                <option value="alquiler">Alquiler</option>
                                <option value="temporal">Alquiler Temporal</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label>Tipo de Propiedad</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item" data-type="apartamento">
                                    <i class="fas fa-building"></i> Apartamento
                                </div>
                                <div class="checkbox-item" data-type="casa">
                                    <i class="fas fa-home"></i> Casa
                                </div>
                                <div class="checkbox-item" data-type="oficina">
                                    <i class="fas fa-briefcase"></i> Oficina
                                </div>
                                <div class="checkbox-item" data-type="local">
                                    <i class="fas fa-store"></i> Local
                                </div>
                                <div class="checkbox-item" data-type="terreno">
                                    <i class="fas fa-mountain"></i> Terreno
                                </div>
                            </div>
                        </div>

                        <div class="filter-group">
                            <label>Ubicación</label>
                            <input type="text" class="filter-input" placeholder="Ciudad, barrio, dirección..." id="location">
                        </div>

                        <div class="filter-group">
                            <label>Rango de Precio</label>
                            <div class="filter-row">
                                <input type="number" class="filter-input" placeholder="Mín." id="priceMin">
                                <input type="number" class="filter-input" placeholder="Máx." id="priceMax">
                            </div>
                        </div>

                        <div class="filter-group">
                            <label>Habitaciones</label>
                            <select class="filter-input" id="bedrooms">
                                <option value="">Cualquier cantidad</option>
                                <option value="1">1 habitación</option>
                                <option value="2">2 habitaciones</option>
                                <option value="3">3 habitaciones</option>
                                <option value="4">4+ habitaciones</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label>Baños</label>
                            <select class="filter-input" id="bathrooms">
                                <option value="">Cualquier cantidad</option>
                                <option value="1">1 baño</option>
                                <option value="2">2 baños</option>
                                <option value="3">3+ baños</option>
                            </select>
                        </div>
                    </div>

                    <!-- Filtros Avanzados -->
                    <div class="tab-content" id="advanced">
                        <div class="filter-group">
                            <label>Área (m²)</label>
                            <div class="filter-row">
                                <input type="number" class="filter-input" placeholder="Mín. m²" id="areaMin">
                                <input type="number" class="filter-input" placeholder="Máx. m²" id="areaMax">
                            </div>
                        </div>

                        <div class="filter-group">
                            <label>Año de Construcción</label>
                            <div class="filter-row">
                                <input type="number" class="filter-input" placeholder="Desde" id="yearFrom">
                                <input type="number" class="filter-input" placeholder="Hasta" id="yearTo">
                            </div>
                        </div>

                        <!-- Filtros dinámicos por categoría -->
                        <div id="dynamicFilters"></div>

                        <div class="filter-group">
                            <label>Estado</label>
                            <select class="filter-input" id="condition">
                                <option value="">Cualquier estado</option>
                                <option value="nuevo">A estrenar</option>
                                <option value="excelente">Excelente</option>
                                <option value="muy-bueno">Muy bueno</option>
                                <option value="bueno">Bueno</option>
                                <option value="refaccionar">A refaccionar</option>
                            </select>
                        </div>
                    </div>

                    <button class="search-btn" style="width: 100%; margin-top: 20px;" onclick="applyFilters()">
                        <i class="fas fa-search"></i> Aplicar Filtros
                    </button>
                    <button class="btn-secondary" style="width: 100%; margin-top: 10px;" onclick="clearFilters()">
                        <i class="fas fa-times"></i> Limpiar Todo
                    </button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <div class="search-bar">
                    <input type="text"
                           class="search-input"
                           placeholder="Ej: Casa con piscina y jardín en Surco de 3 dormitorios máximo 700 mil..."
                           id="mainSearch"
                           autocomplete="off">
                    <button class="search-btn" onclick="performSmartSearch()">
                        <i class="fas fa-magic"></i> Búsqueda Inteligente
                    </button>
                    <div class="search-suggestions" id="searchSuggestions"></div>
                </div>

                <!-- Parámetros detectados -->
                <div id="detectedParams" style="display: none;"></div>

                <!-- Sugerencias inteligentes -->
                <div id="smartSuggestions" style="display: none;"></div>

                <div class="results-header">
                    <div class="results-count">
                        Mostrando <span id="currentCount">24</span> de <span id="totalCount">1,247</span> propiedades
                    </div>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid">
                            <i class="fas fa-th-large"></i>
                        </button>
                        <button class="view-btn" data-view="list">
                            <i class="fas fa-list"></i>
                        </button>
                        <button class="view-btn" data-view="map">
                            <i class="fas fa-map"></i>
                        </button>
                    </div>
                </div>

                <!-- Properties Grid -->
                <div class="properties-grid" id="propertiesContainer">
                    <!-- Las propiedades se cargarán dinámicamente -->
                </div>

                <!-- Loading -->
                <div class="loading" id="loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Cargando propiedades...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Property Details -->
    <div class="modal" id="propertyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Detalles de la Propiedad</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalContent">
                <!-- El contenido se cargará dinámicamente -->
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script src="app.js"></script>
    <script src="data-init.js"></script>
</body>
</html>